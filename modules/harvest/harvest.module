<?php

function harvest_import_record($id) {
    $record = sigb_connector_scrape_bib($id);
    
    $node = new stdClass();
    $node->type = 'biblio_record';
    node_object_prepare($node);
    $node->title = $record['title'];
    unset( $record['title'] );

    foreach ( $record as $name => $value ) {
        $node->{$name}['und'][0]['value'] = $value;
    }
    
    $node = node_submit($node);
    node_save($node);
    return $node->nid;
}

function harvest_import_records($offset, $number) {
    for ( $i = $offset; $i < $offset+$number; $i++ ) {
        harvest_import_record($i);
    }
}
